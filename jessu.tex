% @Author: Your name
% @Date:   2022-03-25 22:18:55
% @Last Modified by:   WU Zihan
% @Last Modified time: 2022-06-18 23:01:25
\documentclass[10pt]{article}


\usepackage{amsmath,amssymb,amsfonts}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{siunitx}
\usepackage{subfigure}
% \usepackage[OT1]{fontenc}
\usepackage{booktabs}
\usepackage{enumerate}
\usepackage[numbers,sort&compress]{natbib}
\usepackage{subfigure}
%\usepackage{url,colortbl}
\usepackage{threeparttable}
\usepackage{verbatim}
%\usepackage{flushend}
\usepackage{amsthm,amsmath,amssymb}
\usepackage{mathrsfs}
\usepackage{algpseudocode}
\usepackage{amsmath}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
% \newtheorem{proof}{Proof}[section]

\usepackage[procnumbered,linesnumbered,ruled]{algorithm2e}
%\usepackage{algorithm}
%\usepackage{algorithmicx}


% \usepackage[T1]{fontenc} 
\usepackage{lmodern}
\usepackage{silence}
\WarningsOff[latexfont]

\begin{document}

\begin{algorithm}\label{prohand}
    \SetCommentSty{text}
    \SetKwInput{KwInput}{Input}                % Set the Input
    \SetKwInput{KwOutput}{Output}              % set the Output
    \KwIn {Blockchain graph $G_0$, genesis block $B_0$}
    \KwOut{Main View $v_0$}
    \caption{Handling Inconsistent Blockchain Views ($G_0, B_0$)}

    % $S_0 \gets \Call{FindSubgroups}{G_0}$ \\
    $S_0 \gets \varnothing$ \\
    \ForEach { $B \in G$}{
        $s \gets \Call{BlocktoSubgroup}{B}$ \\
        % \ForEach{$B' \in s$}{
            \eIf{$B' \in S_0 $}{s}{d}
        % }
    }

    \tcp*[h]{Find all subgroups} \\
    % $V_0 \gets \Call{BuildViews}{V_0,G_0}$ \tcp*[h]{All different subviews} \\
    \ForEach { $B \in G$}{
        \ForEach { $s \in S_0$}{
            $W(s) \gets 0$ \\
            \ForEach{$v \in \Call{SubviewsBeginwith}{s}$}{
                \If{$B \in v$}{
                    $W(s) \gets W(s)+ \Call{Miningpower}{B}$ \\
                    \KwSty{continue}
                }
            }
        }
    }

    $s \gets \Call{BlocktoSubgroup}{B_0}$

    % \ForEach{$s' \in \Call{ChildGroup}{s}$}
    % {
        \uIf{ $\Call{ChildSubroups}{s} = \varnothing$}
        {         \KwRet $s$ \\
        }
        \Else
        {
            Update $s \gets \mathop{\arg\max}\limits_{s'\in \Call{ChildSubroups}{s} } W(s')$\\
            Go to line $15$
        }
    % }
    % \KwRet $v_0$
    \SetKwFunction{FMain}{$\Call{FindSubgroups}{G_0}$}
    \SetKwFunction{FSum}{Sum}
    \SetKwFunction{FSub}{Sub}
    \SetKwProg{Fn}{Function}{:}{}
    \Fn{\FMain }{
        $v \gets v \cup \mathcal{S}$ \\
        $U \gets U \cup \{v\}$ \\
        \uIf{ $\mathcal{S}$ is genesis }
        {         \KwRet{$v,U$}  \\
        }
        \Else
        {

            $\Call{Addpre}{\mathcal{S}.predecessors,G,v,U}$\\

        }
    }
\end{algorithm}


% \begin{algorithm}\label{findview}
%     \SetKwInput{KwInput}{Input}                % Set the Input
%     \SetKwInput{KwOutput}{Output}              % set the Output
%     \KwIn {Graph $G$}
%     \KwOut{View Set $V_s$}
%     \SetCommentSty{text}
%     \caption{FindViews($G$)}
%     $V_s \gets \varnothing$\\
%     $leaf\_group \gets \Call{GroupLeaf}{G}$ \\
%     \ForEach { $\mathcal{S} \in leaf\_group $}{
%         $u,v \gets \varnothing$ \\
%         $v, v.subview \gets \Call{AddPre}{\mathcal{S},G,v,U}$ \\
%         $V_s \gets V_s \cup \{v\}$\\
%     }
%     % \tcp*[h]{$V_s$ is a set containing all views} \\






%     \SetKwFunction{FMain}{$\Call{Addpre}{\mathcal{S}, G, v, U}$}
%     \SetKwFunction{FSum}{Sum}
%     \SetKwFunction{FSub}{Sub}
%     \SetKwProg{Fn}{Function}{:}{}
%     \Fn{\FMain }{
%         $v \gets v \cup \mathcal{S}$ \\
%         $U \gets U \cup \{v\}$ \\
%         \uIf{ $\mathcal{S}$ is genesis }
%         {         \KwRet{$v,U$}  \\
%         }
%         \Else
%         {

%             $\Call{Addpre}{\mathcal{S}.predecessors,G,v,U}$\\

%         }
%     }
% \end{algorithm}



\end{document}